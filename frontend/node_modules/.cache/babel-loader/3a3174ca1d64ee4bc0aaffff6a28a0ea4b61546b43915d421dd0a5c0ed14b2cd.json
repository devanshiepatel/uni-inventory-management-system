{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import { useNavigate } from \"react-router-dom\";\n// import { FaUserCircle } from \"react-icons/fa\";\n// import { jwtDecode } from \"jwt-decode\";\n// import ManageUsers from \"./ManageUsers\";\n// import ManageInventory from \"./ManageInventory\";\n// import Settings from \"./Settings\";\n// import Profile from \"./Profile\";\n// import \"./Dashboard.css\";\n\n// const Dashboard = () => {\n//     const [faculties, setFaculties] = useState([]);\n//     const [userRole, setUserRole] = useState(\"\"); // ‚úÖ Store role locally\n//     const [activeView, setActiveView] = useState(\"dashboard\"); // ‚úÖ Track active section\n//     const navigate = useNavigate();\n\n//     useEffect(() => {\n//         // ‚úÖ Fetch token and decode user role\n//         const token = localStorage.getItem(\"token\");\n//         if (token) {\n//             try {\n//                 const decoded = jwtDecode(token);\n//                 console.log(\"Decoded Token:\", decoded); // ‚úÖ Debugging\n//                 if (decoded.role) {\n//                     setUserRole(decoded.role);\n//                 } else {\n//                     console.warn(\"‚ö†Ô∏è No role found in token!\");\n//                 }\n//             } catch (err) {\n//                 console.error(\"‚ùå Error decoding token:\", err);\n//                 localStorage.removeItem(\"token\");\n//                 setUserRole(\"\");\n//             }\n//         }\n//     }, []);\n\n//     useEffect(() => {\n//         const fetchAllFaculties = async () => {\n//             try {\n//                 const res = await axios.get(\"http://localhost:8800/api/faculties\");\n//                 setFaculties(res.data);\n//             } catch (err) {\n//                 console.error(\"‚ùå Error fetching faculties:\", err);\n//             }\n//         };\n//         fetchAllFaculties();\n//     }, []);\n\n//     return (\n//         <div className=\"dashboard-container\">\n//             {/* Sidebar */}\n//             <div className=\"sidebar\">\n//                 <FaUserCircle size={50} className=\"user-icon\" />\n//                 <div className=\"menu-options\">\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"dashboard\")}>\n//                         Dashboard\n//                     </button>\n\n//                     {/* ‚úÖ Show \"Manage Users\" for HODs & Admins */}\n//                     {userRole && (userRole.toLowerCase() === \"hod\" || userRole.toLowerCase() === \"admin\") && (\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-users\")}>\n//                              Manage Users\n//                         </button>\n//                     )}\n\n//                     {/* ‚úÖ Show \"Manage Inventory\" ONLY for Admins */}\n//                     {userRole === \"admin\" && (\n//                         <button className=\"menu-button\" onClick={() => setActiveView(\"manage-inventory\")}>\n//                             Manage Inventory\n//                         </button>\n//                     )}\n\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"profile\")}>Profile</button>\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"settings\")}>Settings</button>\n//                     <button className=\"menu-button\" onClick={() => {\n//                         localStorage.removeItem(\"token\");\n//                         navigate(\"/\");\n//                     }}>Logout</button>\n//                 </div>\n//             </div>\n\n//             {/* Main Content */}\n//             <div className=\"main-content\">\n//                 {activeView === \"dashboard\" && (\n//                     <>\n//                         <div className=\"header\">\n//                             <h1>DHARMSINH DESAI UNIVERSITY</h1>\n//                         </div>\n\n//                         {/* Faculties Section */}\n//                         <div className=\"faculties-grid\">\n//                             {faculties\n//                                 .filter(faculty => faculty.f_name.toLowerCase() !== \"dduadmin\") // ‚úÖ Hide \"Admin\" faculty\n//                                 .map(faculty => (\n//                                     <div\n//                                         key={faculty.faculty_id}\n//                                         className=\"faculty-card\"\n//                                         onClick={() => {\n//                                             console.log(`Navigating to /departments/${faculty.faculty_id}`);\n//                                             navigate(`/departments/${faculty.faculty_id}`);\n//                                         }}\n//                                     >\n//                                         <div className=\"faculty-icon\">üèõÔ∏è</div>\n//                                         <button className=\"faculty-name\">{faculty.f_name}</button>\n//                                     </div>\n//                                 ))\n//                             }\n//                         </div>\n//                     </>\n//                 )}\n\n//                 {activeView === \"manage-users\" && <ManageUsers />}\n//                 {activeView === \"manage-inventory\" && <ManageInventory />}\n//                 {activeView === \"profile\" && <Profile />}\n//                 {activeView === \"settings\" && <Settings />}\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default Dashboard;","map":{"version":3,"names":[],"sources":["C:/Users/om/Desktop/uims - Copy/client/src/pages/Dashboard.jsx"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import { FaUserCircle } from \"react-icons/fa\";\r\n// import { jwtDecode } from \"jwt-decode\";\r\n// import ManageUsers from \"./ManageUsers\";\r\n// import ManageInventory from \"./ManageInventory\";\r\n// import Settings from \"./Settings\";\r\n// import Profile from \"./Profile\";\r\n// import \"./Dashboard.css\";\r\n\r\n// const Dashboard = () => {\r\n//     const [faculties, setFaculties] = useState([]);\r\n//     const [userRole, setUserRole] = useState(\"\"); // ‚úÖ Store role locally\r\n//     const [activeView, setActiveView] = useState(\"dashboard\"); // ‚úÖ Track active section\r\n//     const navigate = useNavigate();\r\n\r\n//     useEffect(() => {\r\n//         // ‚úÖ Fetch token and decode user role\r\n//         const token = localStorage.getItem(\"token\");\r\n//         if (token) {\r\n//             try {\r\n//                 const decoded = jwtDecode(token);\r\n//                 console.log(\"Decoded Token:\", decoded); // ‚úÖ Debugging\r\n//                 if (decoded.role) {\r\n//                     setUserRole(decoded.role);\r\n//                 } else {\r\n//                     console.warn(\"‚ö†Ô∏è No role found in token!\");\r\n//                 }\r\n//             } catch (err) {\r\n//                 console.error(\"‚ùå Error decoding token:\", err);\r\n//                 localStorage.removeItem(\"token\");\r\n//                 setUserRole(\"\");\r\n//             }\r\n//         }\r\n//     }, []);\r\n\r\n//     useEffect(() => {\r\n//         const fetchAllFaculties = async () => {\r\n//             try {\r\n//                 const res = await axios.get(\"http://localhost:8800/api/faculties\");\r\n//                 setFaculties(res.data);\r\n//             } catch (err) {\r\n//                 console.error(\"‚ùå Error fetching faculties:\", err);\r\n//             }\r\n//         };\r\n//         fetchAllFaculties();\r\n//     }, []);\r\n\r\n//     return (\r\n//         <div className=\"dashboard-container\">\r\n//             {/* Sidebar */}\r\n//             <div className=\"sidebar\">\r\n//                 <FaUserCircle size={50} className=\"user-icon\" />\r\n//                 <div className=\"menu-options\">\r\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"dashboard\")}>\r\n//                         Dashboard\r\n//                     </button>\r\n\r\n//                     {/* ‚úÖ Show \"Manage Users\" for HODs & Admins */}\r\n//                     {userRole && (userRole.toLowerCase() === \"hod\" || userRole.toLowerCase() === \"admin\") && (\r\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-users\")}>\r\n//                              Manage Users\r\n//                         </button>\r\n//                     )}\r\n\r\n\r\n//                     {/* ‚úÖ Show \"Manage Inventory\" ONLY for Admins */}\r\n//                     {userRole === \"admin\" && (\r\n//                         <button className=\"menu-button\" onClick={() => setActiveView(\"manage-inventory\")}>\r\n//                             Manage Inventory\r\n//                         </button>\r\n//                     )}\r\n\r\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"profile\")}>Profile</button>\r\n//                     <button className=\"menu-button\" onClick={() => setActiveView(\"settings\")}>Settings</button>\r\n//                     <button className=\"menu-button\" onClick={() => {\r\n//                         localStorage.removeItem(\"token\");\r\n//                         navigate(\"/\");\r\n//                     }}>Logout</button>\r\n//                 </div>\r\n//             </div>\r\n\r\n//             {/* Main Content */}\r\n//             <div className=\"main-content\">\r\n//                 {activeView === \"dashboard\" && (\r\n//                     <>\r\n//                         <div className=\"header\">\r\n//                             <h1>DHARMSINH DESAI UNIVERSITY</h1>\r\n//                         </div>\r\n\r\n//                         {/* Faculties Section */}\r\n//                         <div className=\"faculties-grid\">\r\n//                             {faculties\r\n//                                 .filter(faculty => faculty.f_name.toLowerCase() !== \"dduadmin\") // ‚úÖ Hide \"Admin\" faculty\r\n//                                 .map(faculty => (\r\n//                                     <div\r\n//                                         key={faculty.faculty_id}\r\n//                                         className=\"faculty-card\"\r\n//                                         onClick={() => {\r\n//                                             console.log(`Navigating to /departments/${faculty.faculty_id}`);\r\n//                                             navigate(`/departments/${faculty.faculty_id}`);\r\n//                                         }}\r\n//                                     >\r\n//                                         <div className=\"faculty-icon\">üèõÔ∏è</div>\r\n//                                         <button className=\"faculty-name\">{faculty.f_name}</button>\r\n//                                     </div>\r\n//                                 ))\r\n//                             }\r\n//                         </div>\r\n//                     </>\r\n//                 )}\r\n\r\n//                 {activeView === \"manage-users\" && <ManageUsers />}\r\n//                 {activeView === \"manage-inventory\" && <ManageInventory />}\r\n//                 {activeView === \"profile\" && <Profile />}\r\n//                 {activeView === \"settings\" && <Settings />}\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default Dashboard;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}