{"ast":null,"code":"// import React, { useEffect, useState, useContext } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import axios from \"axios\";\n// import { FaUserCircle } from \"react-icons/fa\";\n// import { AuthContext } from \"../auth/AuthContext\";\n// import \"./Dashboard.css\";\n\n// const Dashboard = () => {\n//     const [rooms, setRooms] = useState([]);\n//     const navigate = useNavigate();\n//     const { user, userRole, deptId } = useContext(AuthContext); // ✅ User details from context\n//     const [userName, setUserName] = useState(localStorage.getItem(\"userName\") || \"\"); \n\n//     useEffect(() => {\n//         const fetchRooms = async () => {\n//             try {\n//                 const token = localStorage.getItem(\"token\");\n//                 const response = await axios.get(`http://localhost:8800/api/rooms/${deptId}`, {\n//                     headers: { Authorization: `Bearer ${token}` },\n//                 });\n//                 setRooms(response.data);\n//             } catch (error) {\n//                 console.error(\"❌ Error fetching rooms:\", error);\n//             }\n//         };\n\n//         if (deptId) fetchRooms(); // ✅ Fetch only if deptId is available\n//     }, [deptId]);\n\n//     return (\n//         <div className=\"dashboard-container\">\n//             {/* Sidebar */}\n//             <div className=\"sidebar\">\n//                 <FaUserCircle size={50} className=\"user-icon\" />\n//                 <p className=\"user-name\">{userName}</p>{/* ✅ Display user name */}\n\n//                 <div className=\"menu-options\">\n//                     <button className=\"menu-button\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n\n//                     {/* ✅ HOD & Admin can manage users */}\n//                     {(userRole === \"hod\" || userRole === \"admin\") && (\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-users\")}>Manage Users</button>\n//                     )}\n\n//                     {/* ✅ Only Admin can manage inventory */}\n//                     {userRole === \"admin\" && (\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-inventory\")}>Manage Inventory</button>\n//                     )}\n//                     <button className=\"menu-button\" onClick={() => {\n//                         localStorage.removeItem(\"token\");\n//                         navigate(\"/\");\n//                     }}>Logout</button>\n//                 </div>\n//             </div>\n\n//             {/* Main Content */}\n//             <div className=\"main-content\">\n//                 <h2>Rooms in Your Department</h2>\n\n//                 {/* Room Grid */}\n//                 <div className=\"rooms-grid\">\n//                     {[\"classroom\", \"lab\", \"utility\"].map((category) => (\n//                         <div \n//                             key={category} \n//                             className=\"room-card\" \n//                             onClick={() => navigate(`/rooms/${category}`)}\n//                         >\n//                             <h3>{category.charAt(0).toUpperCase() + category.slice(1)}s</h3>\n//                             <p>{rooms.filter(room => room.room_type === category).length} rooms available</p>\n//                         </div>\n//                     ))}\n//                 </div>\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default Dashboard;","map":{"version":3,"names":[],"sources":["C:/Users/om/Desktop/uims - Copy/client/src/pages/Dashboard.jsx"],"sourcesContent":["// import React, { useEffect, useState, useContext } from \"react\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import axios from \"axios\";\r\n// import { FaUserCircle } from \"react-icons/fa\";\r\n// import { AuthContext } from \"../auth/AuthContext\";\r\n// import \"./Dashboard.css\";\r\n\r\n// const Dashboard = () => {\r\n//     const [rooms, setRooms] = useState([]);\r\n//     const navigate = useNavigate();\r\n//     const { user, userRole, deptId } = useContext(AuthContext); // ✅ User details from context\r\n//     const [userName, setUserName] = useState(localStorage.getItem(\"userName\") || \"\"); \r\n\r\n//     useEffect(() => {\r\n//         const fetchRooms = async () => {\r\n//             try {\r\n//                 const token = localStorage.getItem(\"token\");\r\n//                 const response = await axios.get(`http://localhost:8800/api/rooms/${deptId}`, {\r\n//                     headers: { Authorization: `Bearer ${token}` },\r\n//                 });\r\n//                 setRooms(response.data);\r\n//             } catch (error) {\r\n//                 console.error(\"❌ Error fetching rooms:\", error);\r\n//             }\r\n//         };\r\n\r\n//         if (deptId) fetchRooms(); // ✅ Fetch only if deptId is available\r\n//     }, [deptId]);\r\n\r\n//     return (\r\n//         <div className=\"dashboard-container\">\r\n//             {/* Sidebar */}\r\n//             <div className=\"sidebar\">\r\n//                 <FaUserCircle size={50} className=\"user-icon\" />\r\n//                 <p className=\"user-name\">{userName}</p>{/* ✅ Display user name */}\r\n\r\n//                 <div className=\"menu-options\">\r\n//                     <button className=\"menu-button\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\r\n\r\n//                     {/* ✅ HOD & Admin can manage users */}\r\n//                     {(userRole === \"hod\" || userRole === \"admin\") && (\r\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-users\")}>Manage Users</button>\r\n//                     )}\r\n\r\n//                     {/* ✅ Only Admin can manage inventory */}\r\n//                     {userRole === \"admin\" && (\r\n//                         <button className=\"menu-button\" onClick={() => navigate(\"/manage-inventory\")}>Manage Inventory</button>\r\n//                     )}\r\n//                     <button className=\"menu-button\" onClick={() => {\r\n//                         localStorage.removeItem(\"token\");\r\n//                         navigate(\"/\");\r\n//                     }}>Logout</button>\r\n//                 </div>\r\n//             </div>\r\n\r\n//             {/* Main Content */}\r\n//             <div className=\"main-content\">\r\n//                 <h2>Rooms in Your Department</h2>\r\n\r\n//                 {/* Room Grid */}\r\n//                 <div className=\"rooms-grid\">\r\n//                     {[\"classroom\", \"lab\", \"utility\"].map((category) => (\r\n//                         <div \r\n//                             key={category} \r\n//                             className=\"room-card\" \r\n//                             onClick={() => navigate(`/rooms/${category}`)}\r\n//                         >\r\n//                             <h3>{category.charAt(0).toUpperCase() + category.slice(1)}s</h3>\r\n//                             <p>{rooms.filter(room => room.room_type === category).length} rooms available</p>\r\n//                         </div>\r\n//                     ))}\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default Dashboard;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}